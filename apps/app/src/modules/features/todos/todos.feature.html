<h2 class="__title">Todos</h2>

<mat-card class="__add-form-card">
  <vsh-todo-add-form (add)="onAdd$.next($event)"></vsh-todo-add-form>
</mat-card>

<div class="__actions-wrap">
  <div class="__actions-grid">

    <div *ngrxLet="hideCompleted$ as hideCompleted">
      <mat-slide-toggle
        #toggleRef
        [checked]="hideCompleted"
        (toggleChange)="hideCompleted$.next(!toggleRef.checked)">
        Skrýt vyřešené
      </mat-slide-toggle>
    </div>

    <div>
      <button
        class="__mark-all-complete-button"
        mat-flat-button
        (click)="onMarkAllComplete$.next()"
        color="accent">
        <mat-icon fontSet="material-icons-outlined">check_circle</mat-icon> Označit vše jako vyřešené
      </button>
    </div>

  </div>
</div>

<ng-container *ngrxLet="{
  todos: visibleTodos$,
  count: todosCount$
} as state">
  <div class="__todo-item-wrap" *ngFor="let todo of state.todos">
    <vsh-todo-item
      (delete)="onDelete$.next($event)"
      (update)="onUpdate$.next($event)"
      [data]="todo">
    </vsh-todo-item>
  </div>

  <div class="__count-wrap">
    Vyřešené <strong>{{ state.count.completed }}x</strong> —
    Aktivní <strong>{{ state.count.active }}x</strong> —
    Celkem <strong>{{ state.count.active + state.count.completed }}x</strong>
  </div>

</ng-container>
